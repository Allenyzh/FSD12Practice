<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6" lang="en">
<head>
</head>
<body>
<div th:fragment="commonMenu">
    <div sec:authorize="isAuthenticated()">
        <ul class="menu menu-horizontal bg-base-200">
            <li><a th:href="@{/}">Todo List</a></li>
            <li><a th:href="@{/add}">Add a task</a></li>
            <li><a th:href="@{/logout}">Logout</a></li>
        </ul>
    </div>

    <div sec:authorize="!isAuthenticated()">
        <ul class="menu menu-horizontal bg-base-200">
            <li><a th:href="@{/register}">Register</a> </li>
            <li><a th:href="@{/login}">Login</a></li>
        </ul>
    </div>
    <div id="flash-message" th:if="${message}"
         class="fixed top-4 right-4 bg-green-500 text-white px-4 py-3 rounded shadow-md transition-opacity duration-500 opacity-100">
        <p th:text="${message}"></p>
    </div>
    <script>
        window.onload = function() {
            var flashMessage = document.getElementById('flash-message');
            setTimeout(function() {
                flashMessage.classList.add('opacity-0');
            }, 3000);
            setTimeout(function() {
                flashMessage.remove();
            }, 4000);
        };
    </script>
</div>
</body>
</html>